// lib/i18n.js
// Minimal i18n utility with Latvian as default and English fallback

const en = {
  title: 'Achievements',
  filters: 'Filters',
  date: 'Date',
  month: 'Month',
  range: 'Range',
  range_day: 'Day',
  range_month: 'Month',
  season: 'Season',
  season_none: 'None',
  lock_id: 'Lock ID',
  user_id: 'User ID',
  user_id_placeholder: 'Enter user ID or username',
  per_page: 'Per page',
  apply: 'Apply',
  prev: 'Prev',
  next: 'Next',
  showing_page_of: 'Showing page',
  of: 'of',
  total_entries_for: 'total entries for',
  achievements_for: 'Achievements (for this {period})',
  achievements_none: 'No data for achievements yet.',
  total_entries: 'Total entries{suffix}:',
  unique_users: 'Unique users{suffix}:',
  most_active_user: 'Most active user:',
  most_used_lock: 'Most used lock:',
  busiest_hour: 'Busiest hour:',
  time_span: 'Time span:',
  all_pages_suffix: ' (all pages)',
  leaderboard: 'Leaderboard (this {period})',
  top_users: 'Top users',
  top_locks: 'Top locks',
  top_early: 'Top early visitors (before 08:00)',
  top_night: 'Top night visitors (22:00+)',
  longest_streak: 'Longest streak (days)',
  no_data: 'No data.',
  global_leaderboard: 'Global leaderboard (all time)',
  show_global: 'Show global leaderboard',
  user_profile: 'User profile:',
  no_user_lifetime: 'No lifetime data found for this user.',
  total_visits_all_time: 'Total visits (all time)',
  longest_streak_days: 'Longest streak (days)',
  first_seen: 'First seen',
  last_seen: 'Last seen',
  achievements: 'Achievements',
  none_yet: 'No achievements earned yet.',
  // Achievement titles & descriptions (lifetime profile)
  ach_title_milestone_10: 'Visitor I',
  ach_desc_milestone_10: '10+ visits (distinct days on primary lock)',
  ach_title_milestone_50: 'Visitor II',
  ach_desc_milestone_50: '50+ visits (distinct days on primary lock)',
  ach_title_milestone_100: 'Visitor III',
  ach_desc_milestone_100: '100+ visits (distinct days on primary lock)',
  ach_title_early_bird: 'Early Bird',
  ach_desc_early_bird: 'Visited before 08:00',
  ach_title_night_owl: 'Night Owl',
  ach_desc_night_owl: 'Visited at or after 22:00',
  ach_title_active_month: 'Active This Month',
  ach_desc_active_month: '5+ visits in the last 30 days',
  season_progress: 'Season progress — {season}',
  no_season_activity: 'No season activity for this user.',
  points_distinct_days: 'Points (distinct active days)',
  rank: 'Rank',
  current_streak: 'Current streak',
  level: 'Level',
  entries_by_lock: 'Entries by lock (selected {period})',
  all: 'All',
  today: 'today',
  page: 'Page',
  days: 'days',
  entries_word: 'entries',
  table_time: 'Time',
  table_datetime: 'Date & Time',
  table_user: 'User',
  table_fullname: 'Full name',
  table_lock: 'Lock',
  table_mac: 'MAC',
  table_type: 'Type',
  table_battery: 'Battery',
  no_entries_found: 'No entries found.',
  language: 'Language',
  lang_lv: 'Latviešu',
  lang_en: 'English',
  charts: 'Analytics & charts',
  chart_entries_per_day: 'Entries per day',
  chart_entries_per_hour: 'Entries per hour',
  chart_dau: 'DAU',
  chart_dau_hour: 'DAU by hour',
  chart_retention: 'Retention distribution (active days in range)',
  chart_streaks: 'Streak distribution (longest in range)',
  chart_cohort: 'Cohort: new vs returning by month',
  export_csv: 'Export CSV',
  export_png: 'Export PNG',
  // Explanations for charts
  dau_def: 'DAU = distinct active users per day (local time).',
  cohort_def: 'New = users whose first month equals this month (blue). Returning = users seen this month with a first month earlier (green).',
  cohort_new_label: 'New',
  cohort_returning_label: 'Returning',
  y_entries: 'entries',
  y_users: 'users',
  // Misc used in chart subtitles/legends
  for: 'for',
  dau: 'DAU',
  wau: 'WAU',
  mau: 'MAU',
};

const lv = {
  title: 'Sasniegumi',
  filters: 'Filtri',
  date: 'Datums',
  month: 'Mēnesis',
  range: 'Periods',
  range_day: 'Diena',
  range_month: 'Mēnesis',
  season: 'Sezona',
  season_none: 'Nav',
  lock_id: 'Atslēgas ID',
  user_id: 'Lietotāja ID',
  user_id_placeholder: 'Ievadiet lietotāja ID vai lietotājvārdu',
  per_page: 'Rindas lapā',
  apply: 'Meklēt',
  prev: 'Iepriekšējā',
  next: 'Nākamā',
  showing_page_of: 'Rāda lapu',
  of: 'no',
  total_entries_for: 'kopā ieraksti par',
  achievements_for: 'Sasniegumi (attiecīgajam periodam)',
  achievements_none: 'Nav datu sasniegumu aprēķinam.',
  total_entries: 'Ieraksti kopā{suffix}:',
  unique_users: 'Unikālie lietotāji{suffix}:',
  most_active_user: 'Aktīvākais lietotājs:',
  most_used_lock: 'Visbiežāk lietotā atslēga:',
  busiest_hour: 'Noslogotākā stunda:',
  time_span: 'Laika posms:',
  all_pages_suffix: ' (visas lapas)',
  leaderboard: 'Top (attiecīgajam periodam)',
  top_users: 'Top lietotāji',
  top_locks: 'Top atslēgas',
  top_early: 'Top agrie putni (pirms 08:00)',
  top_night: 'Top vēlie putni (22:00+)',
  longest_streak: 'Garākā sērija (dienas)',
  no_data: 'Nav datu.',
  global_leaderboard: 'Globālais tops (visu laiku)',
  show_global: 'Rādīt globālo topu',
  user_profile: 'Lietotāja profils:',
  no_user_lifetime: 'Šim lietotājam nav atrasti dati.',
  total_visits_all_time: 'Vizītes kopā (visu laiku)',
  longest_streak_days: 'Garākā sērija (dienas)',
  first_seen: 'Pirmo reizi redzēts',
  last_seen: 'Pēdējo reizi redzēts',
  achievements: 'Sasniegumi',
  none_yet: 'Sasniegumi vēl nav iegūti.',
  // Achievement titles & descriptions (lifetime profile)
  ach_title_milestone_10: 'Viesis I',
  ach_desc_milestone_10: '10+ vizītes',
  ach_title_milestone_50: 'Viesis II',
  ach_desc_milestone_50: '50+ vizītes',
  ach_title_milestone_100: 'Viesis III',
  ach_desc_milestone_100: '100+ vizītes',
  ach_title_early_bird: 'Agrais putns',
  ach_desc_early_bird: 'Apmeklējums pirms 08:00',
  ach_title_night_owl: 'Vēlais putns',
  ach_desc_night_owl: 'Apmeklējums pēc 22:00 vai vēlāk',
  ach_title_active_month: 'Aktīvs šomēnes',
  ach_desc_active_month: '5+ vizītes pēdējās 30 dienās',
  season_progress: 'Sezonas progress — {season}',
  no_season_activity: 'Sezonā nav aktivitātes šim lietotājam.',
  points_distinct_days: 'Punkti (unikālās aktīvās dienas)',
  rank: 'Vieta',
  current_streak: 'Pašreizējā sērija',
  level: 'Līmenis',
  entries_by_lock: 'Ieraksti pēc atslēgas (izvēlētais periods)',
  all: 'Visas',
  today: 'šodien',
  page: 'Lapa',
  days: 'dienas',
  entries_word: 'ieraksti',
  table_time: 'Laiks',
  table_datetime: 'Datums un laiks',
  table_user: 'Lietotājs',
  table_fullname: 'Pilnais vārds',
  table_lock: 'Atslēga',
  table_mac: 'MAC',
  table_type: 'Tips',
  table_battery: 'Baterija',
  no_entries_found: 'Ieraksti nav atrasti.',
  language: 'Valoda',
  lang_lv: 'Latviešu',
  lang_en: 'Angļu',
  charts: 'Analītika un grafiki',
  chart_entries_per_day: 'Ieraksti dienā',
  chart_entries_per_hour: 'Ieraksti pa stundām',
  chart_dau: 'DAU',
  chart_dau_hour: 'DAU pa stundām',
  chart_retention: 'Noturība (aktīvās dienas periodā)',
  chart_streaks: 'Sēriju sadalījums (garākā periodā)',
  chart_cohort: 'Kohortas: jauni vs. atgriezušies pēc mēneša',
  export_csv: 'Eksportēt CSV',
  export_png: 'Eksportēt PNG',
  // Explanations for charts
  dau_def: 'DAU = unikāli aktīvie lietotāji dienā (pēc lokālā laika).',
  cohort_def: 'Jaunie = lietotāji, kuru pirmais mēnesis sakrīt ar šo (zils). Atgriezušies = lietotāji ar pirmo mēnesi agrāku (zaļš).',
  cohort_new_label: 'Jaunie',
  cohort_returning_label: 'Atgriezušies',
  y_entries: 'ieraksti',
  y_users: 'lietotāji',
  // Misc used in chart subtitles/legends
  for: 'par',
  dau: 'DAU',
  wau: 'WAU',
  mau: 'MAU',
};

const dict = { en, lv };

export function getTranslations(lang = 'lv') {
  return dict[lang] || lv;
}

export function t(key, vars = {}, lang = 'lv') {
  const d = getTranslations(lang);
  let s = d[key] || en[key] || key;
  for (const [k, v] of Object.entries(vars)) {
    s = s.replace(`{${k}}`, String(v));
  }
  return s;
}

export default { getTranslations, t };
